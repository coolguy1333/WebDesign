<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MHS IT Club</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="header-inner">
    <img src="./images/logo.png" alt="MHS IT Club Logo" class="site-logo">
    <nav class="top-nav">
      <a href="/minecraft">Minecraft Server</a>
      <a class="active" href="/">Home</a>
      <a href="https://discord.gg/ex3BMp4W" target="_blank">Discord</a>
    </nav>
  </div>
</header>

<main>

<section class="card">
  <h2>Minecraft Server</h2>
  <p class="muted">
    Works on <strong>Java</strong> and <strong>Bedrock</strong>.
  </p>

  <p><strong>Server Address:</strong><br>
  <span class="mono">play.mhsit.club</span></p>

  <div class="status-grid">
    <div class="status-item">
      <div class="status-title">Overall Players</div>
      <div class="status-value" id="overall-players">Checking…</div>
    </div>

    <div class="status-item">
      <div class="status-title">Java</div>
      <div class="status-value" id="java-status">Checking…</div>
    </div>

    <div class="status-item">
      <div class="status-title">Bedrock</div>
      <div class="status-value" id="bedrock-status">Checking…</div>
    </div>
  </div>

  <p>
    <a class="button" href="/minecraft">Server Details</a>
    <a class="button button-outline" href="https://discord.gg/ex3BMp4W" target="_blank">Join Discord</a>
  </p>
</section>

<section class="card">
  <h2>About</h2>
  <p>MHS IT Club is for students interested in programming, systems, and real-world IT skills.</p>
</section>

<section class="card">
  <h2>What we do</h2>
  <ul class="feature-list">
    <li>Programming (Python, C/C++, Web)</li>
    <li>Projects & automation</li>
    <li>Linux & networking basics</li>
    <li>Collaborative builds</li>
  </ul>
</section>

<section class="card">
  <h2>Meetings</h2>
  <p class="muted">All meetings are online. Calendar updates automatically.</p>

  <div class="calendar-embed">
    <iframe
      src="https://calendar.google.com/calendar/embed?src=0a8f741060f1b0390913f97be2dee26c0476b08a47bbb615ef88bb0e29572b38%40group.calendar.google.com&ctz=America%2FChicago&mode=MONTH&showTitle=0&showTabs=0&showPrint=0&showCalendars=0&showTz=0&bgcolor=%23020617"
      loading="lazy">
    </iframe>
  </div>
</section>

</main>

<footer>
  © 2026 MHS IT Club · <a href="https://discord.gg/ex3BMp4W" target="_blank">Discord</a>
</footer>

<script>
const REFRESH_MS = 15000;

function setBadge(el, state, text) {
  el.classList.remove("ok","bad","muted");
  if (state === true) { el.textContent = text || "Online"; el.classList.add("ok"); }
  else if (state === false) { el.textContent = text || "Offline"; el.classList.add("bad"); }
  else { el.textContent = "Unavailable"; el.classList.add("muted"); }
}

async function refresh() {
  try {
    const j = await fetch("/api/java?t=" + Date.now()).then(r => r.json());
    const b = await fetch("/api/bedrock?t=" + Date.now()).then(r => r.json());

    setBadge(document.getElementById("java-status"), j.online);
    setBadge(document.getElementById("bedrock-status"), b.online);

    if (j.online && j.players)
      setBadge(document.getElementById("overall-players"), true, j.players.online + " / " + j.players.max);
    else
      setBadge(document.getElementById("overall-players"), j.online);
  } catch {
    setBadge(document.getElementById("java-status"), null);
    setBadge(document.getElementById("bedrock-status"), null);
    setBadge(document.getElementById("overall-players"), null);
  }
}

refresh();
setInterval(refresh, REFRESH_MS);
</script>

</body>
</html>

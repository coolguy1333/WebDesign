<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MHS IT Club</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>MHS IT Club</h1>
  <nav class="nav">
    <a class="button" href="minecraft.html">Minecraft Server</a>
    <a class="button active" href="index.html">Home</a>
    <a class="button" href="https://discord.gg/ex3BMp4W" target="_blank">Discord</a>
  </nav>
</header>

<main>

<section class="card">
  <h2>Minecraft Server</h2>
  <p><strong>Address:</strong> play.mhsit.club</p>

  <div class="status-grid">
    <div class="status-box">
      <h3>Overall Players</h3>
      <div id="overall-players">Checking...</div>
    </div>

    <div class="status-box">
      <h3>Java</h3>
      <div id="java-status">Checking...</div>
    </div>

    <div class="status-box">
      <h3>Bedrock</h3>
      <div id="bedrock-status">Checking...</div>
    </div>
  </div>

  <div class="button-row">
    <a class="button" href="minecraft.html">Server Details</a>
    <a class="button" href="https://discord.gg/ex3BMp4W" target="_blank">Join Discord</a>
  </div>
</section>

<section class="card">
  <h2>About</h2>
  <p>
    MHS IT Club is for students who want to learn programming, networking,
    systems, and real-world IT skills. Beginners welcome.
  </p>
</section>

</main>

<footer>
  Â© 2026 MHS IT Club
</footer>

<script>
const host = "play.mhsit.club";

function setStatus(el, state, text) {
  el.classList.remove("online", "offline");
  if (state === true) {
    el.textContent = text || "Online";
    el.classList.add("online");
  } else if (state === false) {
    el.textContent = "Offline";
    el.classList.add("offline");
  } else {
    el.textContent = "Checking...";
  }
}

async function checkJava() {
  const res = await fetch("https://api.mcsrvstat.us/2/" + host + "?t=" + Date.now());
  const data = await res.json();
  const online = data.online === true;

  setStatus(document.getElementById("java-status"), online);

  if (online && data.players) {
    const max = data.players.max ?? "?";
    setStatus(
      document.getElementById("overall-players"),
      true,
      data.players.online + " / " + max
    );
  } else {
    setStatus(document.getElementById("overall-players"), false);
  }
}

async function checkBedrock() {
  const res = await fetch("https://api.mcsrvstat.us/bedrock/2/" + host + "?t=" + Date.now());
  const data = await res.json();
  setStatus(document.getElementById("bedrock-status"), data.online === true);
}

async function refresh() {
  try {
    await Promise.all([checkJava(), checkBedrock()]);
  } catch {
    console.log("Status check failed");
  }
}

refresh();
setInterval(refresh, 15000);
</script>

</body>
</html>
